{% extends 'base.html' %}
{% block content %}
<h2>Mi perfil</h2>
<div class="mb-3 text-center">
  <img src="{{ current_user.avatar_url or url_for('static', filename='img/default.png') }}" class="rounded-circle" width="100" height="100" alt="avatar">
  <p class="mt-2">{{ current_user.username }}</p>
  <p>ğŸ’° CrÃ©ditos: {{ current_user.credits }}</p>
</div>
<form method="post">
  <div class="mb-3">
    <textarea class="form-control" name="about" placeholder="Sobre mÃ­">{{ current_user.about }}</textarea>
  </div>
  <div class="mb-3">
    <input type="text" class="form-control" name="avatar_url" placeholder="URL del avatar" value="{{ current_user.avatar_url }}">
  </div>
  <button class="btn btn-primary" type="submit">Guardar</button>
</form>
<h5>Historial de CrÃ©ditos</h5>
<ul>
  {% for c in current_user.credit_history %}
    <li>{{ '+' if c.amount > 0 else '' }}{{ c.amount }} â€“ {{ c.reason }} ({{ c.timestamp.strftime('%Y-%m-%d') }})</li>
  {% endfor %}
</ul>
{% endblock %}
