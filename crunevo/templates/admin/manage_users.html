{% extends 'admin/base_admin.html' %}
{% block content %}
<h2 class="page-title">Gestión de usuarios</h2>

<div class="card">
  <div class="table-responsive">
    <table id="tablaUsuarios" class="table table-vcenter card-table">
      <thead>
        <tr>
          <th>Nombre</th><th>Email</th><th>Rol</th>
          <th>Créditos</th><th>Estado</th><th></th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr>
          <td>{{ user.username }}</td>
          <td>{{ user.email }}</td>
          <td><span class="badge bg-{{ 'purple' if user.role == 'admin' else 'blue' }}">{{ 'Admin' if user.role == 'admin' else 'Estudiante' }}</span></td>
          <td>{{ user.credits }}</td>
          <td>
            <span class="status-dot status-dot-{{ 'green' if user.activated else 'red' }}"></span>
          </td>
          <td class="text-end">
            <a href="#" data-bs-toggle="modal" data-bs-target="#modal-{{ user.id }}" class="btn btn-sm">
              <i class="ti ti-settings"></i>
            </a>
          </td>
        </tr>
        {% include 'admin/modals/user_actions.html' with user=user %}
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  new simpleDatatables.DataTable('#tablaUsuarios');
});
</script>
{% endblock %}
