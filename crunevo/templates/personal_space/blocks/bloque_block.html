
<div class="bloque-content">
    {% set metadata = block.get_metadata() %}
    <div class="bloque-header">
        <div class="bloque-subject">
            {% if metadata.get('subject') %}
            <span class="subject-tag">{{ metadata.get('subject') }}</span>
            {% endif %}
        </div>
        <button class="btn btn-sm btn-ghost" onclick="toggleBloque({{ block.id }})" aria-label="Mostrar u ocultar bloque">
            <i class="bi bi-chevron-down"></i>
        </button>
    </div>
    
    <div class="bloque-summary">
        <div class="summary-stats">
            <span><i class="bi bi-journal-text"></i> {{ metadata.get('grouped_blocks', [])|length }} elementos</span>
        </div>
    </div>
    
    <p class="bloque-description">
        {{ block.content[:60] }}{% if block.content|length > 60 %}...{% endif %}
    </p>
    
    <div class="bloque-actions">
        <button class="btn btn-sm btn-outline-primary" onclick="manageBloque({{ block.id }})">
            <i class="bi bi-gear"></i>
            Gestionar
        </button>
    </div>
</div>
