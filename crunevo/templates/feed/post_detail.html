{% extends 'base.html' %}
{% block content %}
<div class="card">
  <div class="card-body">
    <div class="d-flex align-items-center mb-2">
      {% set author = post.author %}
      {% if author %}
      <img src="{{ author.avatar_url or url_for('static', filename='img/default.png') }}" class="rounded-circle me-2" width="40" height="40" alt="avatar">
      <a href="{{ url_for('auth.public_profile', user_id=author.id) }}" class="me-auto text-decoration-none">
        <strong>{{ author.username }}</strong>
      </a>
      {% else %}
      <img src="{{ url_for('static', filename='img/default.png') }}" class="rounded-circle me-2" width="40" height="40" alt="avatar">
      <span class="me-auto text-muted">Usuario eliminado</span>
      {% endif %}
      <small class="text-muted">{{ post.created_at.strftime('%Y-%m-%d') }}</small>
    </div>
    <p class="card-text">{{ post.content }}</p>
    {% if post.file_url %}
      {% if post.file_url.endswith('.pdf') %}
      <a href="{{ post.file_url }}" target="_blank" class="btn btn-outline-primary mb-2">Ver PDF</a>
      {% else %}
      <img src="{{ post.file_url }}" class="img-fluid rounded mb-2">
      {% endif %}
    {% endif %}
    <div class="text-muted small">{{ post.likes }} likes</div>
  </div>
</div>
{% endblock %}
