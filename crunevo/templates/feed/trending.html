{% extends "base.html" %}

{% block title %}Trending - Crunevo{% endblock %}

{% block content %}
<div class="container-fluid px-0">
  <div class="row g-0">
    <!-- Left Sidebar -->
    <div class="col-lg-3 d-none d-lg-block">
      {% include 'components/sidebar_left_feed.html' %}
    </div>

    <!-- Main Trending Content -->
    <div class="col-lg-6 col-12">
      <div class="px-3 px-lg-4">
        <!-- Trending Header -->
        <div class="d-flex align-items-center gap-3 mb-4">
          <div class="bg-gradient-primary rounded-circle p-3">
            <i class="bi bi-fire text-white fs-4"></i>
          </div>
          <div>
            <h2 class="mb-1 text-gradient">ðŸ”¥ Trending</h2>
            <p class="text-muted mb-0">Los posts mÃ¡s populares de la semana</p>
          </div>
        </div>

        <!-- Trending Filters -->
        <div class="d-flex gap-3 mb-4 overflow-auto pb-2">
          <button class="btn btn-primary btn-sm rounded-pill px-4 active" data-filter="semana">
            <i class="bi bi-calendar-week me-1"></i> Esta semana
          </button>
          <button class="btn btn-outline-primary btn-sm rounded-pill px-4" data-filter="mes">
            <i class="bi bi-calendar-month me-1"></i> Este mes
          </button>
          <button class="btn btn-outline-primary btn-sm rounded-pill px-4" data-filter="populares">
            <i class="bi bi-heart me-1"></i> MÃ¡s likes
          </button>
        </div>

        <!-- Weekly Posts -->
        <div id="trendingContainer">
          {% for post in weekly_posts %}
          {% set item = {"type": "post", "data": post} %}
          {% include 'components/post_card.html' with context %}
          {% endfor %}
        </div>

        <!-- Empty state -->
        {% if not weekly_posts %}
        <div class="empty-state text-center py-5">
          <div class="empty-state-icon mb-3">ðŸ“ˆ</div>
          <h4 class="text-muted mb-2">Â¡AÃºn no hay trending!</h4>
          <p class="text-muted mb-4">SÃ© el primero en crear contenido viral</p>
          <a href="{{ url_for('feed.view_feed') }}" class="btn btn-primary rounded-pill">
            Ir al Feed
          </a>
        </div>
        {% endif %}
      </div>
    </div>

    <!-- Right Sidebar -->
    <div class="col-lg-3 d-none d-lg-block">
      {% include 'components/sidebar_right.html' %}
    </div>
  </div>
</div>
{% endblock %}