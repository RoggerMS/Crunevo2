<nav class="navbar navbar-dark navbar-crunevo fixed-top">
  <div class="tw-container tw-mx-auto tw-px-4 tw-max-w-7xl d-flex align-items-center justify-content-between">
    <button id="mobileMenuToggle" class="btn btn-link text-white tw-md:tw-hidden tw-text-2xl" type="button" aria-label="Menú">
      <i class="bi bi-list"></i>
    </button>
    <a class="navbar-brand" href="{{ url_for('feed.index') }}">Crunevo</a>
    <form class="d-none d-md-flex mx-4 flex-grow-1 position-relative" id="globalSearchForm">
      <input class="form-control" type="search" placeholder="Buscar" aria-label="Buscar" id="globalSearchInput" autocomplete="off">
      <div id="searchSuggestions" class="tw-absolute tw-left-0 tw-z-10 tw-w-full tw-bg-white dark:tw-bg-gray-800 tw-border tw-border-gray-200 dark:tw-border-gray-700 tw-rounded tw-shadow"></div>
    </form>
    <div class="d-none d-md-flex align-items-center" id="navbarNav">
      <ul class="navbar-nav mr-auto mb-2 md:mb-0 d-flex flex-row">
        <li class="nav-item"><a class="nav-link" href="{{ url_for('feed.index') }}"><i class="bi bi-house-door"></i></a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('feed.trending') }}"><i class="bi bi-fire"></i></a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('notes.list_notes') }}"><i class="bi bi-journal-text"></i></a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('store.store_index') }}"><i class="bi bi-bag"></i></a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('chat.chat_index') }}"><i class="bi bi-chat-dots"></i></a></li>
        {% if current_user.is_authenticated and current_user.role == 'admin' %}
        <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.dashboard') }}"><i class="bi bi-speedometer2"></i></a></li>
        {% endif %}
      </ul>
      <ul class="navbar-nav align-items-center">
        {% if current_user.is_authenticated %}
        <li class="nav-item"><a class="nav-link" href="{{ url_for('auth.perfil') }}"><i class="bi bi-person-circle"></i></a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('auth.logout') }}"><i class="bi bi-box-arrow-right"></i></a></li>
        {% else %}
        <li class="nav-item"><a class="nav-link" href="{{ url_for('auth.login') }}">Iniciar sesión</a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('onboarding.register') }}">Registrarse</a></li>
        {% endif %}
        {% if current_user.is_authenticated %}
        <li class="nav-item text-white mx-2"><i class="bi bi-coin"></i> {{ current_user.credits }}</li>
        {% if current_user.verification_level >= 2 %}
        {% include 'components/edu_badge.html' %}
        {% endif %}
        {% endif %}
        <li class="nav-item">
          <button id="themeToggle" class="btn btn-sm btn-secondary ml-2 focus-visible:tw-ring-2 focus-visible:tw-ring-[var(--primary)] focus-visible:tw-ring-offset-2" type="button"><i class="bi bi-moon"></i></button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div id="mobileMenuOverlay" class="tw-fixed tw-inset-0 tw-bg-black/60 tw-z-50 tw-hidden md:tw-hidden">
  <div class="tw-fixed tw-top-0 tw-left-0 tw-h-full tw-w-64 tw-bg-white tw-p-4 dark:tw-bg-gray-900">
    <button id="closeMobileMenu" class="tw-absolute tw-top-2 tw-right-2 tw-text-2xl" type="button">✖</button>
    <ul class="tw-space-y-4 tw-mt-10">
      <li><a href="{{ url_for('feed.index') }}" class="tw-block"><i class="bi bi-house-door"></i> Inicio</a></li>
      <li><a href="{{ url_for('notes.list_notes') }}" class="tw-block"><i class="bi bi-journal-text"></i> Apuntes</a></li>
      <li><a href="{{ url_for('store.store_index') }}" class="tw-block"><i class="bi bi-bag"></i> Tienda</a></li>
      <li><a href="{{ url_for('chat.chat_index') }}" class="tw-block"><i class="bi bi-chat-dots"></i> Chat</a></li>
      {% if current_user.is_authenticated %}
      <li><a href="{{ url_for('auth.perfil') }}" class="tw-block"><i class="bi bi-person-circle"></i> Perfil</a></li>
      <li><a href="{{ url_for('auth.logout') }}" class="tw-block"><i class="bi bi-box-arrow-right"></i> Salir</a></li>
      {% else %}
      <li><a href="{{ url_for('auth.login') }}" class="tw-block">Iniciar sesión</a></li>
      <li><a href="{{ url_for('onboarding.register') }}" class="tw-block">Registrarse</a></li>
      {% endif %}
    </ul>
  </div>
</div>
