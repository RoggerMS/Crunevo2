{% macro reaction_container(post, counts=None, my=None) %}
{% set sorted_counts = counts|dictsort(false, 'value')|reverse|list if counts else [] %}
{% set main = sorted_counts[0][0] if sorted_counts else 'ğŸ”¥' %}
<div class="reaction-container position-relative d-inline-block" data-post-id="{{ post.id }}" data-my-reaction="{{ my or '' }}">
  <button class="fb-action-btn like-btn {{ 'active' if my }}" data-post-id="{{ post.id }}">
    <i class="bi bi-fire{{ '-fill' if my else '' }}"></i>
    <span class="action-text">Me gusta</span>
    <span class="action-count">{{ post.likes or 0 }}</span>
  </button>
  <div class="reaction-panel absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex flex-wrap gap-1 p-1 rounded-full shadow-lg bg-white/90 dark:bg-zinc-800/90 z-50 d-none">
    <button class="reaction-btn" data-reaction="ğŸ”¥" title="Crunazo">ğŸ”¥</button>
    <button class="reaction-btn" data-reaction="ğŸ§ " title="Neuro">ğŸ§ </button>
    <button class="reaction-btn" data-reaction="ğŸ’”" title="Roto">ğŸ’”</button>
    <button class="reaction-btn" data-reaction="ğŸ˜ " title="Molesto">ğŸ˜ </button>
    <button class="reaction-btn" data-reaction="ğŸ¥¶" title="Congelao">ğŸ¥¶</button>
    <button class="reaction-btn" data-reaction="ğŸ˜‚" title="VacilÃ³n">ğŸ˜‚</button>
    <button class="reaction-btn" data-reaction="ğŸ¤¡" title="Cringe">ğŸ¤¡</button>
    <button class="reaction-btn" data-reaction="ğŸ˜²" title="Asu">ğŸ˜²</button>
    <button class="reaction-btn" data-reaction="ğŸ‘" title="Me gusta">ğŸ‘</button>
    <button class="reaction-btn" data-reaction="ğŸ’¡" title="Interesante">ğŸ’¡</button>
    <button class="reaction-btn" data-reaction="ğŸ™Œ" title="Gracias">ğŸ™Œ</button>
    <button class="reaction-btn" data-reaction="ğŸ“Œ" title="Lo guardÃ©">ğŸ“Œ</button>
  </div>
  {% if sorted_counts %}
  <div class="reaction-counts mt-1 small text-muted">
    {% for emoji, count in sorted_counts %}
      {{ emoji }} {{ count }}&nbsp;
    {% endfor %}
  </div>
  {% endif %}
</div>
{% endmacro %}
