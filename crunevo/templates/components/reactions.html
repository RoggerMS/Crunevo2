{% macro reaction_container(post, counts=None) %}
{% set sorted_counts = counts|dictsort(false, 'value')|reverse|list if counts else [] %}
{% set main = sorted_counts[0][0] if sorted_counts else 'ğŸ”¥' %}
<div class="reaction-container position-relative d-inline-block" data-post-id="{{ post.id }}">
  <button class="btn btn-reaction">
    <span class="main-emoji">{{ main }}</span> <span class="count">{{ post.likes or 0 }}</span>
  </button>
  <div class="reaction-options d-none position-absolute">
    <button class="reaction-btn" data-reaction="ğŸ”¥" title="Crunazo">ğŸ”¥</button>
    <button class="reaction-btn" data-reaction="ğŸ§ " title="Neuro">ğŸ§ </button>
    <button class="reaction-btn" data-reaction="ğŸ’”" title="Roto">ğŸ’”</button>
    <button class="reaction-btn" data-reaction="ğŸ˜ " title="Molesto">ğŸ˜ </button>
    <button class="reaction-btn" data-reaction="ğŸ¥¶" title="Congelao">ğŸ¥¶</button>
    <button class="reaction-btn" data-reaction="ğŸ˜‚" title="VacilÃ³n">ğŸ˜‚</button>
    <button class="reaction-btn" data-reaction="ğŸ¤¡" title="Cringe">ğŸ¤¡</button>
    <button class="reaction-btn" data-reaction="ğŸ˜²" title="Asu">ğŸ˜²</button>
  </div>
  {% if sorted_counts %}
  <div class="reaction-counts mt-1 small text-muted">
    {% for emoji, count in sorted_counts %}
      {{ emoji }} {{ count }}&nbsp;
    {% endfor %}
  </div>
  {% endif %}
</div>
{% endmacro %}
