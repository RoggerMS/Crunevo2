<div class="card answer-card {% if answer.is_accepted %}accepted{% endif %}">
    {% if answer.is_accepted %}
    <div class="card-header" style="background: linear-gradient(135deg, #4ade80, #22c55e); color: white;">
        <div class="d-flex align-items-center justify-content-center gap-2">
            <i class="bi bi-check-circle-fill"></i>
            <span class="fw-bold">Respuesta Aceptada por el Autor</span>
            <span>âœ¨</span>
        </div>
    </div>
    {% endif %}
    <div class="card-body p-4">
        <div class="d-flex align-items-start">
            <!-- Enhanced Avatar -->
            <div class="me-3 text-center">
                {% set author = answer.author %}
                <img src="{{ author.avatar_url if author else url_for('static', filename='img/default.png') }}"
                     class="rounded-circle user-avatar" width="48" height="48" alt="Avatar">
                <div class="small text-muted mt-1">{{ author.points if author else 0 }}pts</div>
            </div>
            
            <div class="flex-grow-1">
                <!-- Author Info with Enhanced Design -->
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div class="d-flex align-items-center gap-2">
                        <h6 class="mb-0 fw-bold">@{{ author.username if author else 'Usuario eliminado' }}</h6>
                        <span class="badge bg-primary bg-opacity-10 text-primary">
                            <i class="bi bi-mortarboard me-1"></i>Colaborador
                        </span>
                        {% if answer.is_accepted %}
                        <span class="badge bg-success bg-opacity-10 text-success">
                            <i class="bi bi-award me-1"></i>Respuesta Destacada
                        </span>
                        {% endif %}
                    </div>
                    <small class="text-muted">
                        <i class="bi bi-clock me-1"></i>
                        {{ answer.created_at.strftime('%d/%m/%Y %H:%M') }}
                    </small>
                </div>
                
                <!-- Answer Content with Enhanced Typography -->
                <div class="answer-body mb-4 p-3 rounded-3">
                    {{ answer.content|safe }}
                </div>
                
                <!-- Enhanced Action Buttons -->
                <div class="d-flex align-items-center justify-content-between">
                    <div class="vote-group d-flex align-items-center">
                        <button class="btn btn-sm vote-btn vote-up" onclick="voteAnswer({{ answer.id }}, 'up')" title="Votar positivamente">
                            <i class="bi bi-arrow-up-circle"></i>
                        </button>
                        <span class="mx-2 fw-bold text-primary fs-5">{{ answer.votes }}</span>
                        <button class="btn btn-sm vote-btn vote-down" onclick="voteAnswer({{ answer.id }}, 'down')" title="Votar negativamente">
                            <i class="bi bi-arrow-down-circle"></i>
                        </button>
                    </div>
                    
                    <div class="d-flex align-items-center gap-2">
                        {% if current_user.is_authenticated and current_user.id == question.author_id and not answer.is_accepted %}
                        <button class="btn btn-success btn-sm" onclick="acceptAnswer({{ answer.id }})" title="Marcar como soluciÃ³n">
                            <i class="bi bi-check-circle me-1"></i>
                            Marcar como soluciÃ³n
                        </button>
                        {% endif %}
                        
                        <button class="btn btn-outline-secondary btn-sm" title="Responder a esta respuesta">
                            <i class="bi bi-reply me-1"></i>
                            Responder
                        </button>
                        
                        <button class="btn btn-outline-primary btn-sm" title="Compartir respuesta">
                            <i class="bi bi-share me-1"></i>
                            Compartir
                        </button>
                    </div>
                </div>
                
                <!-- Mathematical Appreciation (only for accepted answers) -->
                {% if answer.is_accepted %}
                <div class="mt-3 p-3 rounded-3" style="background: linear-gradient(135deg, rgba(74, 222, 128, 0.1), rgba(34, 197, 94, 0.1)); border: 1px solid rgba(74, 222, 128, 0.3);">
                    <div class="d-flex align-items-center gap-2 text-success">
                        <span style="font-size: 1.2rem;">ðŸŽ¯</span>
                        <small class="fw-semibold">Â¡Excelente explicaciÃ³n matemÃ¡tica! Esta respuesta fue seleccionada por su claridad y precisiÃ³n.</small>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
